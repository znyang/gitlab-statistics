package com.zen.android.gitlab.sdk;

import com.zen.android.gitlab.sdk.model.Calendar;

import junit.framework.Assert;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.robolectric.RobolectricGradleTestRunner;
import org.robolectric.annotation.Config;

/**
 * @author zen
 * @version 2016/4/26
 */
@RunWith(RobolectricGradleTestRunner.class)
@Config(constants = BuildConfig.class, sdk = IConfig.SDK_LEVEL,
        manifest = IConfig.MANIFEST_PATH)
public class CalendarTest {

    private static final String TEST_FULL_SRC = "<div class='calendar' id='cal-heatmap'>\n" +
            "<script>\n" +
            "  new Calendar(\n" +
            "    {\"1430006400\":0,\"1430092800\":0,\"1430179200\":0,\"1430265600\":8,\"1430352000\":8,\"1430438400\":3,\"1430524800\":0,\"1430611200\":0,\"1430697600\":5,\"1430784000\":0,\"1430870400\":16,\"1430956800\":27,\"1431043200\":9,\"1431129600\":0,\"1431216000\":0,\"1431302400\":26,\"1431388800\":2,\"1431475200\":16,\"1431561600\":0,\"1431648000\":19,\"1431734400\":0,\"1431820800\":1,\"1431907200\":16,\"1431993600\":6,\"1432080000\":16,\"1432166400\":31,\"1432252800\":15,\"1432339200\":0,\"1432425600\":0,\"1432512000\":0,\"1432598400\":8,\"1432684800\":42,\"1432771200\":33,\"1432857600\":11,\"1432944000\":0,\"1433030400\":0,\"1433116800\":10,\"1433203200\":12,\"1433289600\":8,\"1433376000\":16,\"1433462400\":10,\"1433548800\":0,\"1433635200\":0,\"1433721600\":7,\"1433808000\":7,\"1433894400\":10,\"1433980800\":11,\"1434067200\":9,\"1434153600\":0,\"1434240000\":0,\"1434326400\":3,\"1434412800\":5,\"1434499200\":14,\"1434585600\":12,\"1434672000\":17,\"1434758400\":0,\"1434844800\":0,\"1434931200\":8,\"1435017600\":10,\"1435104000\":5,\"1435190400\":10,\"1435276800\":6,\"1435363200\":0,\"1435449600\":0,\"1435536000\":7,\"1435622400\":12,\"1435708800\":4,\"1435795200\":23,\"1435881600\":0,\"1435968000\":4,\"1436054400\":0,\"1436140800\":2,\"1436227200\":34,\"1436313600\":7,\"1436400000\":19,\"1436486400\":8,\"1436572800\":0,\"1436659200\":0,\"1436745600\":6,\"1436832000\":7,\"1436918400\":1,\"1437004800\":9,\"1437091200\":3,\"1437177600\":0,\"1437264000\":0,\"1437350400\":12,\"1437436800\":6,\"1437523200\":4,\"1437609600\":5,\"1437696000\":1,\"1437782400\":0,\"1437868800\":0,\"1437955200\":3,\"1438041600\":5,\"1438128000\":8,\"1438214400\":3,\"1438300800\":7,\"1438387200\":0,\"1438473600\":0,\"1438560000\":3,\"1438646400\":3,\"1438732800\":4,\"1438819200\":6,\"1438905600\":3,\"1438992000\":0,\"1439078400\":0,\"1439164800\":0,\"1439251200\":8,\"1439337600\":0,\"1439424000\":4,\"1439510400\":0,\"1439596800\":0,\"1439683200\":0,\"1439769600\":2,\"1439856000\":0,\"1439942400\":1,\"1440028800\":5,\"1440115200\":14,\"1440201600\":9,\"1440288000\":5,\"1440374400\":11,\"1440460800\":6,\"1440547200\":4,\"1440633600\":0,\"1440720000\":0,\"1440806400\":0,\"1440892800\":0,\"1440979200\":2,\"1441065600\":10,\"1441152000\":1,\"1441238400\":0,\"1441324800\":0,\"1441411200\":0,\"1441497600\":0,\"1441584000\":0,\"1441670400\":7,\"1441756800\":5,\"1441843200\":2,\"1441929600\":7,\"1442016000\":6,\"1442102400\":0,\"1442188800\":12,\"1442275200\":3,\"1442361600\":6,\"1442448000\":10,\"1442534400\":3,\"1442620800\":5,\"1442707200\":7,\"1442793600\":13,\"1442880000\":21,\"1442966400\":8,\"1443052800\":11,\"1443139200\":6,\"1443225600\":0,\"1443312000\":0,\"1443398400\":1,\"1443484800\":9,\"1443571200\":8,\"1443657600\":5,\"1443744000\":0,\"1443830400\":0,\"1443916800\":0,\"1444003200\":0,\"1444089600\":0,\"1444176000\":0,\"1444262400\":3,\"1444348800\":2,\"1444435200\":1,\"1444521600\":0,\"1444608000\":0,\"1444694400\":0,\"1444780800\":0,\"1444867200\":3,\"1444953600\":1,\"1445040000\":5,\"1445126400\":0,\"1445212800\":3,\"1445299200\":3,\"1445385600\":13,\"1445472000\":15,\"1445558400\":0,\"1445644800\":0,\"1445731200\":0,\"1445817600\":0,\"1445904000\":0,\"1445990400\":9,\"1446076800\":1,\"1446163200\":6,\"1446249600\":2,\"1446336000\":0,\"1446422400\":4,\"1446508800\":5,\"1446595200\":19,\"1446681600\":10,\"1446768000\":0,\"1446854400\":0,\"1446940800\":6,\"1447027200\":9,\"1447113600\":0,\"1447200000\":5,\"1447286400\":5,\"1447372800\":9,\"1447459200\":0,\"1447545600\":0,\"1447632000\":7,\"1447718400\":1,\"1447804800\":5,\"1447891200\":16,\"1447977600\":12,\"1448064000\":3,\"1448150400\":12,\"1448236800\":11,\"1448323200\":2,\"1448409600\":0,\"1448496000\":13,\"1448582400\":13,\"1448668800\":0,\"1448755200\":0,\"1448841600\":6,\"1448928000\":12,\"1449014400\":16,\"1449100800\":4,\"1449187200\":5,\"1449273600\":0,\"1449360000\":0,\"1449446400\":9,\"1449532800\":0,\"1449619200\":0,\"1449705600\":16,\"1449792000\":3,\"1449878400\":0,\"1449964800\":3,\"1450051200\":15,\"1450137600\":10,\"1450224000\":12,\"1450310400\":1,\"1450396800\":11,\"1450483200\":0,\"1450569600\":0,\"1450656000\":16,\"1450742400\":12,\"1450828800\":22,\"1450915200\":0,\"1451001600\":0,\"1451088000\":0,\"1451174400\":0,\"1451260800\":10,\"1451347200\":15,\"1451433600\":3,\"1451520000\":6,\"1451606400\":0,\"1451692800\":0,\"1451779200\":0,\"1451865600\":1,\"1451952000\":4,\"1452038400\":15,\"1452124800\":6,\"1452211200\":12,\"1452297600\":0,\"1452384000\":1,\"1452470400\":4,\"1452556800\":10,\"1452643200\":10,\"1452729600\":3,\"1452816000\":29,\"1452902400\":0,\"1452988800\":2,\"1453075200\":7,\"1453161600\":9,\"1453248000\":14,\"1453334400\":1,\"1453420800\":8,\"1453507200\":0,\"1453593600\":0,\"1453680000\":0,\"1453766400\":7,\"1453852800\":6,\"1453939200\":7,\"1454025600\":4,\"1454112000\":0,\"1454198400\":0,\"1454284800\":7,\"1454371200\":1,\"1454457600\":7,\"1454544000\":4,\"1454630400\":9,\"1454716800\":0,\"1454803200\":0,\"1454889600\":16,\"1454976000\":0,\"1455062400\":1,\"1455148800\":0,\"1455235200\":0,\"1455321600\":0,\"1455408000\":0,\"1455494400\":0,\"1455580800\":2,\"1455667200\":5,\"1455753600\":12,\"1455840000\":7,\"1455926400\":0,\"1456012800\":0,\"1456099200\":22,\"1456185600\":1,\"1456272000\":2,\"1456358400\":1,\"1456444800\":3,\"1456531200\":0,\"1456617600\":0,\"1456704000\":2,\"1456790400\":7,\"1456876800\":3,\"1456963200\":10,\"1457049600\":4,\"1457136000\":0,\"1457222400\":0,\"1457308800\":10,\"1457395200\":12,\"1457481600\":7,\"1457568000\":3,\"1457654400\":10,\"1457740800\":0,\"1457827200\":0,\"1457913600\":7,\"1458000000\":1,\"1458086400\":1,\"1458172800\":1,\"1458259200\":4,\"1458345600\":24,\"1458432000\":0,\"1458518400\":5,\"1458604800\":7,\"1458691200\":2,\"1458777600\":0,\"1458864000\":0,\"1458950400\":0,\"1459036800\":0,\"1459123200\":0,\"1459209600\":0,\"1459296000\":0,\"1459382400\":0,\"1459468800\":0,\"1459555200\":0,\"1459641600\":0,\"1459728000\":3,\"1459814400\":3,\"1459900800\":2,\"1459987200\":8,\"1460073600\":2,\"1460160000\":0,\"1460246400\":0,\"1460332800\":2,\"1460419200\":0,\"1460505600\":2,\"1460592000\":0,\"1460678400\":0,\"1460764800\":0,\"1460851200\":0,\"1460937600\":2,\"1461024000\":5,\"1461110400\":14,\"1461196800\":13,\"1461283200\":0,\"1461369600\":0,\"1461456000\":0,\"1461542400\":0,\"1461628800\":15,\"1461715200\":0},\n" +
            "    2015,\n" +
            "    4,\n" +
            "    '/u/JobV/calendar_activities'\n" +
            "  );\n" +
            "</script>\n" +
            "</div>\n" +
            "<div class='calendar-hint'>Summary of issues, merge requests, and push events</div>";

    private static final String TEST_CALENDAR_SRC = "{\"1430006400\":0,\"1430092800\":0," +
            "\"1430179200\":0,\"1430265600\":8,\"1430352000\":8,\"1430438400\":3,\"1430524800\":0,\"1430611200\":0,\"1430697600\":5,\"1430784000\":0,\"1430870400\":16,\"1430956800\":27,\"1431043200\":9,\"1431129600\":0,\"1431216000\":0,\"1431302400\":26,\"1431388800\":2,\"1431475200\":16,\"1431561600\":0,\"1431648000\":19,\"1431734400\":0,\"1431820800\":1,\"1431907200\":16,\"1431993600\":6,\"1432080000\":16,\"1432166400\":31,\"1432252800\":15,\"1432339200\":0,\"1432425600\":0,\"1432512000\":0,\"1432598400\":8,\"1432684800\":42,\"1432771200\":33,\"1432857600\":11,\"1432944000\":0,\"1433030400\":0,\"1433116800\":10,\"1433203200\":12,\"1433289600\":8,\"1433376000\":16,\"1433462400\":10,\"1433548800\":0,\"1433635200\":0,\"1433721600\":7,\"1433808000\":7,\"1433894400\":10,\"1433980800\":11,\"1434067200\":9,\"1434153600\":0,\"1434240000\":0,\"1434326400\":3,\"1434412800\":5,\"1434499200\":14,\"1434585600\":12,\"1434672000\":17,\"1434758400\":0,\"1434844800\":0,\"1434931200\":8,\"1435017600\":10,\"1435104000\":5,\"1435190400\":10,\"1435276800\":6,\"1435363200\":0,\"1435449600\":0,\"1435536000\":7,\"1435622400\":12,\"1435708800\":4,\"1435795200\":23,\"1435881600\":0,\"1435968000\":4,\"1436054400\":0,\"1436140800\":2,\"1436227200\":34,\"1436313600\":7,\"1436400000\":19,\"1436486400\":8,\"1436572800\":0,\"1436659200\":0,\"1436745600\":6,\"1436832000\":7,\"1436918400\":1,\"1437004800\":9,\"1437091200\":3,\"1437177600\":0,\"1437264000\":0,\"1437350400\":12,\"1437436800\":6,\"1437523200\":4,\"1437609600\":5,\"1437696000\":1,\"1437782400\":0,\"1437868800\":0,\"1437955200\":3,\"1438041600\":5,\"1438128000\":8,\"1438214400\":3,\"1438300800\":7,\"1438387200\":0,\"1438473600\":0,\"1438560000\":3,\"1438646400\":3,\"1438732800\":4,\"1438819200\":6,\"1438905600\":3,\"1438992000\":0,\"1439078400\":0,\"1439164800\":0,\"1439251200\":8,\"1439337600\":0,\"1439424000\":4,\"1439510400\":0,\"1439596800\":0,\"1439683200\":0,\"1439769600\":2,\"1439856000\":0,\"1439942400\":1,\"1440028800\":5,\"1440115200\":14,\"1440201600\":9,\"1440288000\":5,\"1440374400\":11,\"1440460800\":6,\"1440547200\":4,\"1440633600\":0,\"1440720000\":0,\"1440806400\":0,\"1440892800\":0,\"1440979200\":2,\"1441065600\":10,\"1441152000\":1,\"1441238400\":0,\"1441324800\":0,\"1441411200\":0,\"1441497600\":0,\"1441584000\":0,\"1441670400\":7,\"1441756800\":5,\"1441843200\":2,\"1441929600\":7,\"1442016000\":6,\"1442102400\":0,\"1442188800\":12,\"1442275200\":3,\"1442361600\":6,\"1442448000\":10,\"1442534400\":3,\"1442620800\":5,\"1442707200\":7,\"1442793600\":13,\"1442880000\":21,\"1442966400\":8,\"1443052800\":11,\"1443139200\":6,\"1443225600\":0,\"1443312000\":0,\"1443398400\":1,\"1443484800\":9,\"1443571200\":8,\"1443657600\":5,\"1443744000\":0,\"1443830400\":0,\"1443916800\":0,\"1444003200\":0,\"1444089600\":0,\"1444176000\":0,\"1444262400\":3,\"1444348800\":2,\"1444435200\":1,\"1444521600\":0,\"1444608000\":0,\"1444694400\":0,\"1444780800\":0,\"1444867200\":3,\"1444953600\":1,\"1445040000\":5,\"1445126400\":0,\"1445212800\":3,\"1445299200\":3,\"1445385600\":13,\"1445472000\":15,\"1445558400\":0,\"1445644800\":0,\"1445731200\":0,\"1445817600\":0,\"1445904000\":0,\"1445990400\":9,\"1446076800\":1,\"1446163200\":6,\"1446249600\":2,\"1446336000\":0,\"1446422400\":4,\"1446508800\":5,\"1446595200\":19,\"1446681600\":10,\"1446768000\":0,\"1446854400\":0,\"1446940800\":6,\"1447027200\":9,\"1447113600\":0,\"1447200000\":5,\"1447286400\":5,\"1447372800\":9,\"1447459200\":0,\"1447545600\":0,\"1447632000\":7,\"1447718400\":1,\"1447804800\":5,\"1447891200\":16,\"1447977600\":12,\"1448064000\":3,\"1448150400\":12,\"1448236800\":11,\"1448323200\":2,\"1448409600\":0,\"1448496000\":13,\"1448582400\":13,\"1448668800\":0,\"1448755200\":0,\"1448841600\":6,\"1448928000\":12,\"1449014400\":16,\"1449100800\":4,\"1449187200\":5,\"1449273600\":0,\"1449360000\":0,\"1449446400\":9,\"1449532800\":0,\"1449619200\":0,\"1449705600\":16,\"1449792000\":3,\"1449878400\":0,\"1449964800\":3,\"1450051200\":15,\"1450137600\":10,\"1450224000\":12,\"1450310400\":1,\"1450396800\":11,\"1450483200\":0,\"1450569600\":0,\"1450656000\":16,\"1450742400\":12,\"1450828800\":22,\"1450915200\":0,\"1451001600\":0,\"1451088000\":0,\"1451174400\":0,\"1451260800\":10,\"1451347200\":15,\"1451433600\":3,\"1451520000\":6,\"1451606400\":0,\"1451692800\":0,\"1451779200\":0,\"1451865600\":1,\"1451952000\":4,\"1452038400\":15,\"1452124800\":6,\"1452211200\":12,\"1452297600\":0,\"1452384000\":1,\"1452470400\":4,\"1452556800\":10,\"1452643200\":10,\"1452729600\":3,\"1452816000\":29,\"1452902400\":0,\"1452988800\":2,\"1453075200\":7,\"1453161600\":9,\"1453248000\":14,\"1453334400\":1,\"1453420800\":8,\"1453507200\":0,\"1453593600\":0,\"1453680000\":0,\"1453766400\":7,\"1453852800\":6,\"1453939200\":7,\"1454025600\":4,\"1454112000\":0,\"1454198400\":0,\"1454284800\":7,\"1454371200\":1,\"1454457600\":7,\"1454544000\":4,\"1454630400\":9,\"1454716800\":0,\"1454803200\":0,\"1454889600\":16,\"1454976000\":0,\"1455062400\":1,\"1455148800\":0,\"1455235200\":0,\"1455321600\":0,\"1455408000\":0,\"1455494400\":0,\"1455580800\":2,\"1455667200\":5,\"1455753600\":12,\"1455840000\":7,\"1455926400\":0,\"1456012800\":0,\"1456099200\":22,\"1456185600\":1,\"1456272000\":2,\"1456358400\":1,\"1456444800\":3,\"1456531200\":0,\"1456617600\":0,\"1456704000\":2,\"1456790400\":7,\"1456876800\":3,\"1456963200\":10,\"1457049600\":4,\"1457136000\":0,\"1457222400\":0,\"1457308800\":10,\"1457395200\":12,\"1457481600\":7,\"1457568000\":3,\"1457654400\":10,\"1457740800\":0,\"1457827200\":0,\"1457913600\":7,\"1458000000\":1,\"1458086400\":1,\"1458172800\":1,\"1458259200\":4,\"1458345600\":24,\"1458432000\":0,\"1458518400\":5,\"1458604800\":7,\"1458691200\":2,\"1458777600\":0,\"1458864000\":0,\"1458950400\":0,\"1459036800\":0,\"1459123200\":0,\"1459209600\":0,\"1459296000\":0,\"1459382400\":0,\"1459468800\":0,\"1459555200\":0,\"1459641600\":0,\"1459728000\":3,\"1459814400\":3,\"1459900800\":2,\"1459987200\":8,\"1460073600\":2,\"1460160000\":0,\"1460246400\":0,\"1460332800\":2,\"1460419200\":0,\"1460505600\":2,\"1460592000\":0,\"1460678400\":0,\"1460764800\":0,\"1460851200\":0,\"1460937600\":2,\"1461024000\":5,\"1461110400\":14,\"1461196800\":13,\"1461283200\":0,\"1461369600\":0,\"1461456000\":0,\"1461542400\":0,\"1461628800\":15,\"1461715200\":0}";

    @Test
    public void testParseCalendar() throws Exception {
        Calendar calendar = Calendar.parseCalendar(TEST_FULL_SRC);

        Assert.assertNotNull(calendar);
        System.out.println("calendar total count:" + calendar.getTotalCount());
        Assert.assertTrue(calendar.getTotalCount() > 0);
    }

    @Test
    public void testParseCalendarFromJson() throws Exception {
        Calendar calendar = Calendar.parseCalendarFromJson(TEST_CALENDAR_SRC);

        Assert.assertNotNull(calendar);
        System.out.println("calendar total count:" + calendar.getTotalCount());
        Assert.assertTrue(calendar.getTotalCount() > 0);
    }


}
